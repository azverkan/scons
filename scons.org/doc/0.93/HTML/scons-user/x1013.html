<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Why SCons Duplicates Source Files in a Build Directory</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="SCons User Guide 0.93"
HREF="book1.html"><LINK
REL="UP"
TITLE="Separating Source and Build Directories"
HREF="c976.html"><LINK
REL="PREVIOUS"
TITLE="Separating Source and Build Directories"
HREF="c976.html"><LINK
REL="NEXT"
TITLE="Telling SCons to Not Duplicate Source Files in the Build Directory"
HREF="x1030.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.93</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c976.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Separating Source and Build Directories</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x1030.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN1013"
></A
>Why <TT
CLASS="APPLICATION"
>SCons</TT
> Duplicates Source Files in a Build Directory</H1
><P
>&#13;    <TT
CLASS="APPLICATION"
>SCons</TT
> duplicates source files in build directories
    because it's the most straightforward way to guarantee a correct build
    <I
CLASS="EMPHASIS"
>regardless of include-file directory paths,
    relative references between files,
    or tool support for putting files in different locations</I
>,
    and the <TT
CLASS="APPLICATION"
>SCons</TT
> philosophy is to, by default,
    guarantee a correct build in all cases.

    </P
><P
>&#13;    The most direct reason to duplicate source files
    in build directories
    is simply that some tools (mostly older vesions)
    are written to only build their output files
    in the same directory as the source files.
    In this case, the choices are either
    to build the output file in the source directory
    and move it to the build directory,
    or to duplicate the source files in the build directory.

    </P
><P
>&#13;    Additionally,
    relative references between files
    can cause problems if we don't
    just duplicate the hierarchy of source files
    in the build directory.
    You can see this at work in
    use of the C preprocessor <TT
CLASS="LITERAL"
>#include</TT
>
    mechanism with double quotes, not angle brackets:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>      #include "file.h"
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    The <I
CLASS="EMPHASIS"
>de facto</I
> standard behavior
    for most C compilers in this case
    is to first look in the same directory
    as the source file that contains the <TT
CLASS="LITERAL"
>#include</TT
> line,
    then to look in the directories in the preprocessor search path.
    Add to this that the <TT
CLASS="APPLICATION"
>SCons</TT
> implementation of
    support for code repositories
    (described below)
    means not all of the files
    will be found in the same directory hierarchy,
    and the simplest way to make sure
    that the right include file is found
    is to duplicate the source files into the build directory,
    which provides a correct build
    regardless of the original location(s) of the source files.

    </P
><P
>&#13;    Although source-file duplication guarantees a correct build
    even in these end-cases,
    it <I
CLASS="EMPHASIS"
>can</I
> usually be safely disabled.
    The next section describes
    how you can disable the duplication of source files
    in the build directory.

    </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c976.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x1030.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Separating Source and Build Directories</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c976.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Telling <TT
CLASS="APPLICATION"
>SCons</TT
> to Not Duplicate Source Files in the Build Directory</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>