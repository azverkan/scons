<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Troubleshooting</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="SCons User Guide 0.96"
HREF="book1.html"><LINK
REL="PREVIOUS"
TITLE="Building RMI Stub and Skeleton Class Files:  the RMIC Builder"
HREF="x2725.html"><LINK
REL="NEXT"
TITLE="Handling Common Tasks"
HREF="a2796.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.96</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x2725.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="a2796.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="CHAP-TROUBLESHOOTING"
></A
>Troubleshooting</H1
><P
>&#13;  The experience of configuring any
  software build tool to build a large code base
  usually, at some point,
  involves trying to figure out why
  the tool is behaving a certain way,
  and how to get it to behave the way you want.
  <TT
CLASS="APPLICATION"
>SCons</TT
> is no different.

  </P
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN2750"
></A
>Why is That Target Being Rebuilt?  the <TT
CLASS="LITERAL"
>--debug=explain</TT
> Option</H1
><P
>&#13;    Let's take a simple example of
    a misconfigured build
    that causes a target to be rebuilt
    every time <TT
CLASS="APPLICATION"
>SCons</TT
> is run:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>      # Intentionally misspell the output file name in the
      # command used to create the file:
      Command('file.out', 'file.in', 'cp $SOURCE file.oout')
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    (Note to Windows users:  The POSIX <TT
CLASS="APPLICATION"
>cp</TT
> command
    copies the first file named on the command line
    to the second file.
    In our example, it copies the <TT
CLASS="FILENAME"
>file.in</TT
> file
    to the <TT
CLASS="FILENAME"
>file.out</TT
> file.)

    </P
><P
>&#13;    Now if we run <TT
CLASS="APPLICATION"
>SCons</TT
> multiple on this example,
    we see that it re-runs the <TT
CLASS="APPLICATION"
>cp</TT
>
    command every time:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>      % <TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
>
      cp file.in file.oout
      % <TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
>
      cp file.in file.oout
      % <TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
>
      cp file.in file.oout
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    In this example,
    the underlying cause is obvious:
    we've intentionally misspelled the output file name
    in the <TT
CLASS="APPLICATION"
>cp</TT
> command,
    so the command doesn't actually
    build the <TT
CLASS="FILENAME"
>file.out</TT
> file that we've told <TT
CLASS="APPLICATION"
>SCons</TT
> to expect.
    But if the problem weren't obvious,
    it would be helpful
    to specify the <TT
CLASS="LITERAL"
>--debug=explain</TT
> option
    on the command line
    to have <TT
CLASS="APPLICATION"
>SCons</TT
> tell us very specifically
    why it's decided to rebuild the target:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>      % <TT
CLASS="USERINPUT"
><B
>scons -Q --debug=explain</B
></TT
>
      scons: building `file.out' because it doesn't exist
      cp file.in file.oout
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    If this had been a more complicated example
    involving a lot of build output,
    having <TT
CLASS="APPLICATION"
>SCons</TT
> tell us that
    it's trying to rebuild the target file
    because it doesn't exist
    would be an important clue
    that something was wrong with
    the command that we invoked to build it.

    </P
><P
>&#13;    The <TT
CLASS="LITERAL"
>--debug=explain</TT
> option also comes in handy
    to help figure out what input file changed.
    Given a simple configuration that builds
    a program from three source files,
    changing one of the source files
    and rebuilding with the <TT
CLASS="LITERAL"
>--debug=explain</TT
>
    option shows very specifically
    why <TT
CLASS="APPLICATION"
>SCons</TT
> rebuilds the files that it does:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>      % <TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
>
      cc -c -o file1.o file1.c
      cc -c -o file2.o file2.c
      cc -c -o file3.o file3.c
      cc -o prog file1.o file2.o file3.o
      % <TT
CLASS="USERINPUT"
><B
>edit file2.c</B
></TT
>
          [CHANGE THE CONTENTS OF file2.c]
      % <TT
CLASS="USERINPUT"
><B
>scons -Q --debug=explain</B
></TT
>
      scons: rebuilding `file2.o' because `file2.c' changed
      cc -c -o file2.o file2.c
      scons: rebuilding `prog' because `file2.o' changed
      cc -o prog file1.o file2.o file3.o
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    This becomes even more helpful
    in identifying when a file is rebuilt
    due to a change in an implicit dependency,
    such as an incuded <TT
CLASS="FILENAME"
>.h</TT
> file.
    If the <TT
CLASS="FILENAME"
>file1.c</TT
>
    and <TT
CLASS="FILENAME"
>file3.c</TT
> files
    in our example
    both included a <TT
CLASS="FILENAME"
>hello.h</TT
> file,
    then changing that included file
    and re-running <TT
CLASS="APPLICATION"
>SCons</TT
> with the <TT
CLASS="LITERAL"
>--debug=explain</TT
> option
    will pinpoint that it's the change to the included file
    that starts the chain of rebuilds:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>      % <TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
>
      cc -I. -c -o file1.o file1.c
      cc -I. -c -o file2.o file2.c
      cc -I. -c -o file3.o file3.c
      cc -o prog file1.o file2.o file3.o
      % <TT
CLASS="USERINPUT"
><B
>edit hello.h</B
></TT
>
          [CHANGE THE CONTENTS OF hello.h]
      % <TT
CLASS="USERINPUT"
><B
>scons -Q --debug=explain</B
></TT
>
      scons: rebuilding `file1.o' because `hello.h' changed
      cc -I. -c -o file1.o file1.c
      scons: rebuilding `file3.o' because `hello.h' changed
      cc -I. -c -o file3.o file3.c
      scons: rebuilding `prog' because:
                 `file1.o' changed
                 `file3.o' changed
      cc -o prog file1.o file2.o file3.o
    </PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x2725.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="a2796.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Building RMI Stub and Skeleton Class Files:  the <TT
CLASS="FUNCTION"
>RMIC</TT
> Builder</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Handling Common Tasks</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>