<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Deciding When a Target File Has Changed:  the TargetSignatures Function</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REL="HOME"
TITLE="SCons User Guide 0.96.91"
HREF="book1.html"><LINK
REL="UP"
TITLE="Dependencies"
HREF="c762.html"><LINK
REL="PREVIOUS"
TITLE="Dependencies"
HREF="c762.html"><LINK
REL="NEXT"
TITLE="Implicit Dependencies:  The $CPPPATH Construction Variable"
HREF="x874.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.96.91</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="c762.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Dependencies</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x874.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN830"
>Deciding When a Target File Has Changed:  the <TT
CLASS="FUNCTION"
>TargetSignatures</TT
> Function</A
></H1
><P
>&#13;    As you've just seen,
    <TT
CLASS="APPLICATION"
>SCons</TT
> uses signatures to decide whether a 
    target file is up to date or must be rebuilt.
    When a target file depends on another target file,
    <TT
CLASS="APPLICATION"
>SCons</TT
> allows you to configure separately
    how the signatures of "intermediate" target files
    are used when deciding if a dependent target file
    must be rebuilt.

    </P
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN836"
>Build Signatures</A
></H2
><P
>&#13;      Modifying a source file
      will cause not only its direct target file to be rebuilt,
      but also the target file(s)
      that depend on that direct target file.
      In our example,
      changing the contents of the <TT
CLASS="FILENAME"
>hello.c</TT
> file causes
      the <TT
CLASS="FILENAME"
>hello.o</TT
> file to be rebuilt,
      which in turn causes the
      <TT
CLASS="APPLICATION"
>hello</TT
> program to be rebuilt:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>         % <KBD
CLASS="USERINPUT"
>scons -Q hello</KBD
>
         cc -c -o hello.o hello.c
         cc -o hello hello.o
         % <KBD
CLASS="USERINPUT"
>edit hello.c</KBD
>
             [CHANGE THE CONTENTS OF hello.c]
         % <KBD
CLASS="USERINPUT"
>scons -Q hello</KBD
>
         cc -c -o hello.o hello.c
         cc -o hello hello.o
      </PRE
></TD
></TR
></TABLE
><P
>&#13;      What's not obvious, though,
      is that <TT
CLASS="APPLICATION"
>SCons</TT
> internally handles the signature of
      the target file(s)
      (<TT
CLASS="FILENAME"
>hello.o</TT
> in the above example)
      differently from the signature of the source file
      (<TT
CLASS="FILENAME"
>hello.c</TT
>).
      By default,
      <TT
CLASS="APPLICATION"
>SCons</TT
> tracks whether a target file must be rebuilt
      by using a <TT
CLASS="LITERAL"
>build signature</TT
>
      that consists of the combined
      signatures of all the files
      that go into making the target file.
      This is efficient because
      the accumulated signatures
      actually give <TT
CLASS="APPLICATION"
>SCons</TT
> all of the
      information it needs
      to decide if the target file is out of date.

      </P
><P
>&#13;      If you wish, you can
      specify this default behavior
      (build signatures) explicitly
      using the <TT
CLASS="FUNCTION"
>TargetSignatures</TT
> function:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        Program('hello.c')
        TargetSignatures('build')
      </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN856"
>File Contents</A
></H2
><P
>&#13;      Sometimes a source file can be changed
      in such a way that the contents of the
      rebuilt target file(s)
      will be exactly the same as the last time
      the file was built.
      If so, then any other target files
      that depend on such a built-but-not-changed target
      file actually need not be rebuilt.
      You can make <TT
CLASS="APPLICATION"
>SCons</TT
>
      realize that it does not need to rebuild
      a dependent target file in this situation
      using the <TT
CLASS="FUNCTION"
>TargetSignatures</TT
> function as follows:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        Program('hello.c')
        TargetSignatures('content')
      </PRE
></TD
></TR
></TABLE
><P
>&#13;      So if, for example,
      a user were to only change a comment in a C file,
      then the rebuilt <TT
CLASS="FILENAME"
>hello.o</TT
> file
      would be exactly the same as the one previously built
      (assuming the compiler doesn't put any build-specific
      information in the object file).
      <TT
CLASS="APPLICATION"
>SCons</TT
> would then realize that it would not
      need to rebuild the <TT
CLASS="APPLICATION"
>hello</TT
> program as follows:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>         % <KBD
CLASS="USERINPUT"
>scons -Q hello</KBD
>
         cc -c -o hello.o hello.c
         cc -o hello hello.o
         % <KBD
CLASS="USERINPUT"
>edit hello.c</KBD
>
           [CHANGE A COMMENT IN hello.c]
         % <KBD
CLASS="USERINPUT"
>scons -Q hello</KBD
>
         cc -c -o hello.o hello.c
         scons: `hello' is up to date.
      </PRE
></TD
></TR
></TABLE
><P
>&#13;      In essence, <TT
CLASS="APPLICATION"
>SCons</TT
> has
      "short-circuited" any dependent builds
      when it realizes that a target file
      has been rebuilt to exactly the same file as the last build.
      So configured,
      <TT
CLASS="APPLICATION"
>SCons</TT
> does take some extra processing time
      to scan the contents of the target (<TT
CLASS="FILENAME"
>hello.o</TT
>) file,
      but this may save time
      if the rebuild that was avoided
      would have been very time-consuming and expensive.

      </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="c762.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x874.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Dependencies</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c762.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Implicit Dependencies:  The <VAR
CLASS="ENVAR"
>$CPPPATH</VAR
> Construction Variable</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>