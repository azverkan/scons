<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Controlling the External Environment Used to Execute Build Commands</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="SCons User Guide 0.96.1"
HREF="book1.html"><LINK
REL="PREVIOUS"
TITLE="Modifying a Construction Environment"
HREF="x1099.html"><LINK
REL="NEXT"
TITLE="Controlling a Build From the Command Line"
HREF="c1220.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.96.1</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x1099.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="c1220.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="CHAP-ENV"
></A
>Controlling the External Environment Used to Execute Build Commands</H1
><P
>&#13;    When <TT
CLASS="APPLICATION"
>SCons</TT
> builds a target file,
    it does not execute the commands with
    the same external environment
    that you used to execute <TT
CLASS="APPLICATION"
>SCons</TT
>.
    Instead, it uses the dictionary
    stored in the <TT
CLASS="VARNAME"
>ENV</TT
> construction variable
    as the external environment
    for executing commands.

  </P
><P
>&#13;    The most important ramification of this behavior
    is that the <TT
CLASS="VARNAME"
>PATH</TT
> environment variable,
    which controls where the operating system
    will look for commands and utilities,
    is not the same as in the external environment
    from which you called <TT
CLASS="APPLICATION"
>SCons</TT
>.
    This means that <TT
CLASS="APPLICATION"
>SCons</TT
> will not, by default,
    necessarily find all of the tools
    that you can execute from the command line.

  </P
><P
>&#13;    The default value of the <TT
CLASS="VARNAME"
>PATH</TT
> environment variable
    on a POSIX system
    is <TT
CLASS="LITERAL"
>/usr/local/bin:/bin:/usr/bin</TT
>.
    The default value of the <TT
CLASS="VARNAME"
>PATH</TT
> environment variable
    on a Win32 system comes from the Windows registry
    value for the command interpreter.
    If you want to execute any commands--compilers, linkers, etc.--that
    are not in these default locations,
    you need to set the <TT
CLASS="VARNAME"
>PATH</TT
> value
    in the <TT
CLASS="VARNAME"
>ENV</TT
> dictionary
    in your construction environment.

  </P
><P
>&#13;    The simplest way to do this is to initialize explicitly
    the value when you create the construction environment;
    this is one way to do that:

  </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    path = ['/usr/local/bin', '/bin', '/usr/bin']
    env = Environment(ENV = {'PATH' : path})
  </PRE
></TD
></TR
></TABLE
><P
>&#13;  Assign a dictionary to the <TT
CLASS="VARNAME"
>ENV</TT
>
  construction variable in this way
  completely resets the external environment
  so that the only variable that will be
  set when external commands are executed
  will be the <TT
CLASS="VARNAME"
>PATH</TT
> value.
  If you want to use the rest of
  the values in <TT
CLASS="VARNAME"
>ENV</TT
> and only
  set the value of <TT
CLASS="VARNAME"
>PATH</TT
>,
  the most straightforward way is probably:

  </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    env['ENV']['PATH'] = ['/usr/local/bin', '/bin', '/usr/bin']
  </PRE
></TD
></TR
></TABLE
><P
>&#13;  Note that <TT
CLASS="APPLICATION"
>SCons</TT
> does allow you to define
  the directories in the <TT
CLASS="VARNAME"
>PATH</TT
> in a string,
  separated by the pathname-separator character
  for your system (':' on POSIX systems, ';' on Windows):

  </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>    env['ENV']['PATH'] = '/usr/local/bin:/bin:/usr/bin'
  </PRE
></TD
></TR
></TABLE
><P
>&#13;  But doing so makes your <TT
CLASS="FILENAME"
>SConscript</TT
> file less portable,
  (although in this case that may not be a huge concern
  since the directories you list are likley system-specific, anyway).

  </P
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN1201"
></A
>Propagating <TT
CLASS="VARNAME"
>PATH</TT
> From the External Environment</H1
><P
>&#13;    You may want to propagate the external <TT
CLASS="VARNAME"
>PATH</TT
>
    to the execution environment for commands.
    You do this by initializing the <TT
CLASS="VARNAME"
>PATH</TT
>
    variable with the <TT
CLASS="VARNAME"
>PATH</TT
> value from
    the <TT
CLASS="LITERAL"
>os.environ</TT
>
    dictionary,
    which is Python's way of letting you
    get at the external environment:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>      import os
      env = Environment(ENV = {'PATH' : os.environ['PATH']})
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    Alternatively, you may find it easier
    to just propagate the entire external
    environment to the execution environment
    for commands.
    This is simpler to code than explicity
    selecting the <TT
CLASS="VARNAME"
>PATH</TT
> value:

    </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>      import os
      env = Environment(ENV = os.environ)
    </PRE
></TD
></TR
></TABLE
><P
>&#13;    Either of these will guarantee that
    <TT
CLASS="APPLICATION"
>SCons</TT
> will be able to execute
    any command that you can execute from the command line.
    The drawback is that the build can behave
    differently if it's run by people with
    different <TT
CLASS="VARNAME"
>PATH</TT
> values in their environment--for example,
    both the <TT
CLASS="LITERAL"
>/bin</TT
> and
    <TT
CLASS="LITERAL"
>/usr/local/bin</TT
> directories
    have different <TT
CLASS="APPLICATION"
>cc</TT
> commands,
    then which one will be used to compile programs
    will depend on which directory is listed
    first in the user's <TT
CLASS="VARNAME"
>PATH</TT
> variable.

    </P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x1099.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="c1220.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Modifying a <TT
CLASS="LITERAL"
>Construction Environment</TT
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Controlling a Build From the Command Line</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>