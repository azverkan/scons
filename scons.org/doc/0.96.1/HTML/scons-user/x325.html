<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>The SConstruct File</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="SCons User Guide 0.96.1"
HREF="book1.html"><LINK
REL="UP"
TITLE="Simple Builds"
HREF="c234.html"><LINK
REL="PREVIOUS"
TITLE="Cleaning Up After a Build"
HREF="x305.html"><LINK
REL="NEXT"
TITLE="Making the SCons Output Less Verbose"
HREF="x396.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.96.1</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x305.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Simple Builds</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x396.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN325"
></A
>The <TT
CLASS="FILENAME"
>SConstruct</TT
> File</H1
><P
>&#13;   If you're used to build systems like <TT
CLASS="APPLICATION"
>Make</TT
>
   you've already figured out that the <TT
CLASS="FILENAME"
>SConstruct</TT
> file
   is the <TT
CLASS="APPLICATION"
>SCons</TT
> equivalent of a <TT
CLASS="FILENAME"
>Makefile</TT
>.
   That is, the <TT
CLASS="FILENAME"
>SConstruct</TT
> file is the input file
   that <TT
CLASS="APPLICATION"
>SCons</TT
> reads to control the build.

   </P
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN335"
></A
><TT
CLASS="FILENAME"
>SConstruct</TT
> Files Are Python Scripts</H2
><P
>&#13;     There is, however, an important difference between
     an <TT
CLASS="FILENAME"
>SConstruct</TT
> file and a <TT
CLASS="FILENAME"
>Makefile</TT
>:
     the <TT
CLASS="FILENAME"
>SConstruct</TT
> file is actually a Python script.
     If you're not already familiar with Python, don't worry.
     This User's Guide will introduce you step-by-step
     to the relatively small amount of Python you'll
     need to know to be able to use <TT
CLASS="APPLICATION"
>SCons</TT
> effectively.
     And Python is very easy to learn.

     </P
><P
>&#13;     One aspect of using Python as the
     scripting language is that you can put comments
     in your <TT
CLASS="FILENAME"
>SConstruct</TT
> file using Python's commenting convention;
     that is, everything between a '#' and the end of the line
     will be ignored:

     </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        # Arrange to build the "hello" program.
        Program('hello.c')    # "hello.c" is the source file.
     </PRE
></TD
></TR
></TABLE
><P
>&#13;     You'll see throughout the remainder of this Guide
     that being able to use the power of a
     real scripting language
     can greatly simplify the solutions
     to complex requirements of real-world builds.

     </P
></DIV
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN347"
></A
><TT
CLASS="APPLICATION"
>SCons</TT
> Functions Are Order-Independent</H2
><P
>&#13;     One important way in which the <TT
CLASS="FILENAME"
>SConstruct</TT
>
     file is not exactly like a normal Python script,
     and is more like a <TT
CLASS="FILENAME"
>Makefile</TT
>,
     is that the order in which
     the <TT
CLASS="APPLICATION"
>SCons</TT
> functions are called in
     the <TT
CLASS="FILENAME"
>SConstruct</TT
> file
     does <I
CLASS="EMPHASIS"
>not</I
>
     affect the order in which <TT
CLASS="APPLICATION"
>SCons</TT
>
     actually builds the programs and object files
     you want it to build.<A
NAME="AEN357"
HREF="#FTN.AEN357"
>[1]</A
>
     In other words, when you call the <TT
CLASS="FUNCTION"
>Program</TT
> builder
     (or any other builder method),
     you're not telling <TT
CLASS="APPLICATION"
>SCons</TT
> to build
     the program at the instant the builder method is called.
     Instead, you're telling <TT
CLASS="APPLICATION"
>SCons</TT
> to build the program
     that you want, for example,
     a program built from a file named <TT
CLASS="FILENAME"
>hello.c</TT
>,
     and it's up to <TT
CLASS="APPLICATION"
>SCons</TT
> to build that program
     (and any other files) whenever it's necessary.
     (We'll learn more about how
     <TT
CLASS="APPLICATION"
>SCons</TT
> decides when building or rebuilding a file
     is necessary in <A
HREF="c726.html"
>the chapter called <I
>Dependencies</I
></A
>, below.)
 
     </P
><P
>&#13;     <TT
CLASS="APPLICATION"
>SCons</TT
> reflects this distinction between
     <I
CLASS="EMPHASIS"
>calling a builder method like</I
> <TT
CLASS="FUNCTION"
>Program</TT
>&#62;
     and <I
CLASS="EMPHASIS"
>actually building the program</I
>
     by printing the status messages that indicate
     when it's "just reading" the <TT
CLASS="FILENAME"
>SConstruct</TT
> file,
     and when it's actually building the target files.
     This is to make it clear when <TT
CLASS="APPLICATION"
>SCons</TT
> is
     executing the Python statements that make up the <TT
CLASS="FILENAME"
>SConstruct</TT
> file,
     and when <TT
CLASS="APPLICATION"
>SCons</TT
> is actually executing the
     commands or other actions to
     build the necessary files.

     </P
><P
>&#13;     Let's clarify this with an example.
     Python has a <TT
CLASS="LITERAL"
>print</TT
> statement that
     prints a string of characters to the screen.
     If we put <TT
CLASS="LITERAL"
>print</TT
> statements around
     our calls to the <TT
CLASS="FUNCTION"
>Program</TT
> builder method:

     </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>       print "Calling Program('hello.c')"
       Program('hello.c')
       print "Calling Program('goodbye.c')"
       Program('goodbye.c')
       print "Finished calling Program()"
     </PRE
></TD
></TR
></TABLE
><P
>&#13;     Then when we execute <TT
CLASS="APPLICATION"
>SCons</TT
>,
     we see the output from the <TT
CLASS="LITERAL"
>print</TT
>
     statements in between the messages about
     reading the <TT
CLASS="FILENAME"
>SConscript</TT
> files,
     indicating that that is when the
     Python statements are being executed:

     </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>       % <TT
CLASS="USERINPUT"
><B
>scons</B
></TT
>
       scons: Reading SConscript files ...
       Calling Program('hello.c')
       Calling Program('goodbye.c')
       Finished calling Program()
       scons: done reading SConscript files.
       scons: Building targets ...
       cc -c -o goodbye.o goodbye.c
       cc -o goodbye goodbye.o
       cc -c -o hello.o hello.c
       cc -o hello hello.o
       scons: done building targets.
     </PRE
></TD
></TR
></TABLE
><P
>&#13;     Notice also that <TT
CLASS="APPLICATION"
>SCons</TT
> built the <TT
CLASS="APPLICATION"
>goodbye</TT
> program first,
     even though the "reading <TT
CLASS="FILENAME"
>SConscript</TT
>" output
     shows that we called <TT
CLASS="LITERAL"
>Program('hello.c')</TT
>
     first in the <TT
CLASS="FILENAME"
>SConstruct</TT
> file.

     </P
></DIV
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN357"
HREF="x325.html#AEN357"
>[1]</A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>In programming parlance,
     the <TT
CLASS="FILENAME"
>SConstruct</TT
> file is
     <I
CLASS="EMPHASIS"
>declarative</I
>,
     meaning you tell <TT
CLASS="APPLICATION"
>SCons</TT
> what you want done
     and let it figure out the order in which to do it,
     rather than strictly <I
CLASS="EMPHASIS"
>imperative</I
>,
     where you specify explicitly the order in
     which to do things.
     </P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x305.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x396.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Cleaning Up After a Build</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="c234.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Making the <TT
CLASS="APPLICATION"
>SCons</TT
> Output Less Verbose</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>