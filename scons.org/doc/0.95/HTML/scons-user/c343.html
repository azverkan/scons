<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>Dependencies</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="SCons User Guide 0.95"
HREF="book1.html"><LINK
REL="PREVIOUS"
TITLE="Finding Libraries:  the LIBPATH Construction Variable"
HREF="x321.html"><LINK
REL="NEXT"
TITLE="Target File Signatures"
HREF="x410.html"></HEAD
><BODY
CLASS="CHAPTER"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>SCons User Guide 0.95</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="x321.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="x410.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="CHAP-DEPENDS"
></A
>Dependencies</H1
><P
>&#13;  So far we've seen how <TT
CLASS="APPLICATION"
>SCons</TT
> handles one-time builds.
  But the real point of a build tool like <TT
CLASS="APPLICATION"
>SCons</TT
>
  is to rebuild only the necessary things
  when source files change--or, put another way,
  <TT
CLASS="APPLICATION"
>SCons</TT
> should <I
CLASS="EMPHASIS"
>not</I
>
  waste time rebuilding things that have already been built.
  You can see this at work simply be re-invoking <TT
CLASS="APPLICATION"
>SCons</TT
>
  after building our simple <TT
CLASS="APPLICATION"
>hello</TT
> example:

  </P
><P
CLASS="LITERALLAYOUT"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scons:&nbsp;`.'&nbsp;is&nbsp;up&nbsp;to&nbsp;date.<br>
&nbsp;&nbsp;</P
><P
>&#13;  The second time it is executed,
  <TT
CLASS="APPLICATION"
>SCons</TT
> realizes that the <TT
CLASS="APPLICATION"
>hello</TT
> program
  is up-to-date with respect to the current <TT
CLASS="FILENAME"
>hello.c</TT
> source file,
  and avoids rebuilding it.
  You can see this more clearly by naming
  the <TT
CLASS="APPLICATION"
>hello</TT
> program explicitly on the command line:

  </P
><P
CLASS="LITERALLAYOUT"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scons:&nbsp;`hello'&nbsp;is&nbsp;up&nbsp;to&nbsp;date.<br>
&nbsp;&nbsp;</P
><P
>&#13;  Note that <TT
CLASS="APPLICATION"
>SCons</TT
> reports <TT
CLASS="LITERAL"
>"...is up to date"</TT
>
  only for target files named explicitly on the command line,
  to avoid cluttering the output.

  </P
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="AEN366"
></A
>Source File Signatures</H1
><P
>&#13;    The other side of avoiding unnecessary rebuilds
    is the fundamental build tool behavior
    of <I
CLASS="EMPHASIS"
>rebuilding</I
>
    things when a source file changes,
    so that the built software is up to date.
    <TT
CLASS="APPLICATION"
>SCons</TT
> keeps track of this through a
    <TT
CLASS="LITERAL"
>signature</TT
> for each source file,
    and allows you to configure
    whether you want to use the source
    file contents or the modification time (timestamp)
    as the signature.

    </P
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN372"
></A
>MD5 Source File Signatures</H2
><P
>&#13;      By default,
      <TT
CLASS="APPLICATION"
>SCons</TT
> keeps track of whether a source file has changed
      based on the file's contents,
      not the modification time.
      This means that you may be surprised by the
      default <TT
CLASS="APPLICATION"
>SCons</TT
> behavior if you are used to the
      <TT
CLASS="APPLICATION"
>Make</TT
> convention of forcing
      a rebuild by updating the file's modification time
      (using the <TT
CLASS="APPLICATION"
>touch</TT
> command, for example):

      </P
><P
CLASS="LITERALLAYOUT"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>touch hello.c</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scons:&nbsp;`hello'&nbsp;is&nbsp;up&nbsp;to&nbsp;date.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
><P
>&#13;      Even though the file's modification time has changed,
      <TT
CLASS="APPLICATION"
>SCons</TT
> realizes that the contents of the
      <TT
CLASS="FILENAME"
>hello.c</TT
> file have <I
CLASS="EMPHASIS"
>not</I
> changed,
      and therefore that the <TT
CLASS="APPLICATION"
>hello</TT
> program
      need not be rebuilt.
      This avoids unnecessary rebuilds when,
      for example, someone rewrites the
      contents of a file without making a change.
      But if the contents of the file really do change,
      then <TT
CLASS="APPLICATION"
>SCons</TT
> detects the change
      and rebuilds the program as required:

      </P
><P
CLASS="LITERALLAYOUT"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>edit hello.c</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[CHANGE&nbsp;THE&nbsp;CONTENTS&nbsp;OF&nbsp;hello.c]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
><P
>&#13;      Note that you can, if you wish,
      specify this default behavior
      (MD5 signatures) explicitly
      using the <TT
CLASS="FUNCTION"
>SourceSignatures</TT
> function as follows:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        Program('hello.c')
        SourceSignatures('MD5')
      </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="AEN396"
></A
>Source File Time Stamps</H2
><P
>&#13;      If you prefer, you can
      configure <TT
CLASS="APPLICATION"
>SCons</TT
> to use the modification time
      of source files,
      not the file contents,
      when deciding if something needs to be rebuilt.
      To do this, call the <TT
CLASS="FUNCTION"
>SourceSignatures</TT
>
      function as follows:

      </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>        Program('hello.c')
        SourceSignatures('timestamp')
      </PRE
></TD
></TR
></TABLE
><P
>&#13;      This makes <TT
CLASS="APPLICATION"
>SCons</TT
> act like <TT
CLASS="APPLICATION"
>Make</TT
>
      when a file's modification time is updated
      (using the <TT
CLASS="APPLICATION"
>touch</TT
> command, for example):

      </P
><P
CLASS="LITERALLAYOUT"
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>touch hello.c</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;<TT
CLASS="USERINPUT"
><B
>scons -Q hello</B
></TT
><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-c&nbsp;-o&nbsp;hello.o&nbsp;hello.c<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cc&nbsp;-o&nbsp;hello&nbsp;hello.o<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="x321.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="book1.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="x410.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Finding Libraries:  the <TT
CLASS="VARNAME"
>LIBPATH</TT
> Construction Variable</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Target File Signatures</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>